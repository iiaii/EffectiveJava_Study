# #EffectiveJava/3장_모든객체의공통메서드/12toString

## 12. toString을 항상 재정의 하라


Object의 기본 toString 메서드가 우리가 작성한 클래스에 적합한 문자열을 반환하는 경우는 거의 없다. PhoneNumber@adbbd 처럼 단순히 [클래스_이름@16진수로표시한해시코드] 를 반환할 뿐이다. toString의 일반 규약에 따르면 ‘간결하면서 사람이 읽기 쉬운 형태의 유익한 정보’를 반환해야 한다. (PhoneNumber의 경우 전화번호로 알려줌)

toString을 잘 구현한 클래스는 사용하기에 훨씬 즐겁고, 그 클래스를 사용한 시스템은 디버깅하기가 쉽다.
toString메서드는 객체를 println, printf, 문자열 연결(+), assert 구문에 넘길 때, 혹은 디버거가 객체를 출력할 때 자동으로 불린다.

`System.out.println(phoneNumber+”에 연결할 수 없습니다.”);`


실전에서 toString은 그 객체가 가진 주요 정보를 모두 반환하는게 좋다. 구현할 때 반환값의 포맷을 문서화할지 정해야 한다. (이는 아주 중요한 선택임) 전화번호나 행렬 같은 값 클래스라면 문서화하기를 권한다. 포맷을 명시하면 그 객체는 표준적이고, 명확하고, 사람이 읽을 수 있게 된다. 따라서 그 값 그대로 입출력에 사용하거나 CSV파일 처럼 사람이 읽을 수 있는 데이터 객체로 저장할 수도 있다. 

포맷을 명시하기로 했다면, 명시한 포맷에 맞는 문자열과 객체를 상호 전환할 수 있는 정적 팩토리나 생성자를 함께 제공해주면 좋다. 자바 플랫폼의 많은 값 클래스가 따르는 방식이기도 하다. BigInteger, BigDecimal과 대부분의 기본 타입 클래스가 여기 해당한다.


단점도 있다. 포맷을 한번 명시하면 (그 클래스가 많이 쓰인다면) 평생 그 포맷에 얽메이게 된다. 이를 사용하는 프로그래머들이 그 포맷에 맞춰 파싱하고, 새로운 객체를 만들고, 영속 데이터로 저장하는 코드를 작성하는데, 향후 릴리스에서 포맷을 바꾼다면 모두다 바꿔야 한다. (반대로 포맷을 명시하지 않으면 개선의 여지와 유연성이 있다)

포맷을 명시하든 아니는 의도를 명확히 밝혀야 한다. (포맷을 명시하려면 아주 정확하게 해야함)

```java
/**
 * 이 전화번호의 문자열 표현을 반환한다
 * 이 분자열은 “XXX-YYY-ZZZZ”형태의 12글자로 구성된다.
 * XXX는 지역코드, YYY는 프리픽스, ZZZZ는 가입자 번호다 …
 */
@Override
public String toString() {
	return String.format(“%03d-%03d-%04d”,areaCode,prefix,lineNum);
}
```

포맷을 명시하지 않기로 했다면 “상세 형식은 정해지지 않았으며 향후 변경될 수 있다” 등의 표시를 해주면 좋다.

포맷 명시 여부와 상관 없이 toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공하자

정적 유틸리티 클래스(아이템4)는 toString을 제공할 이유가 없다. 또한 대부분의 열거 타입도 자바가 이미 완벽한 toString을 제공하니 따로 재정의 할 필요가 없다. 하지만 하위 클래스 들이 공유해야할 문자열 표현이 있는 추상 클래스라면 toString을 재정의 해야 한다. (대다수 컬렉션 구현체는 추상 컬렉션 클래스들의 toString 메서드를 상속해 쓴다)

AutoValue 프레임워크는 toString도 생성해 준다 (대부분 IDE도 가능) 하지만 직접 구현하는 것이 더 명확한 경우가 많다.

> ::핵심 정리:: 
> 모든 구체 클래스에서 Object의 toString을 재정의 하자 상위 클래스에서 이미 알맞게 재정의 한 경우는 예외이다. 잘 재정의된 클래스는 사용하기도 즐겁고 그 클래스를 사용한 시스템을 디버깅하기 쉽게 해준다. toString은 해당 객체에 관한 명확하고 유용한 정보를 읽기 좋은 형태로 반환해야한다.

